<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Rectangle Area dApp</title>
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.6.0/dist/ethers.umd.min.js"></script>
</head>

<body>
  <h1>Rectangle Area dApp</h1>

  <button id="connectButton">Connect Wallet</button>
  <br><br>

  <label>Width:</label>
  <input id="widthInput" type="number" min="1" />
  <button id="setWidthButton">Set Width 210504020</button>
  <br><br>

  <label>Height:</label>
  <input id="heightInput" type="number" min="1" />
  <button id="setHeightButton">Set Height 210504020</button>
  <br><br>

  <button id="areaButton">Area 210504020</button>

  <h2 id="result"></h2>

<script>
  
  const CONTRACT_ADDRESS = "0x542Cc3470d1e72451d11d8198f21BE91b6CFcb56"; // Remixâ€™ten tekrar kopyala

  const ABI = [
    // PaylaÅŸtÄ±ÄŸÄ±nÄ±z ABI'nÄ±n tamamÄ± buraya kopyalandÄ±.
    {
        "inputs": [], "name": "area", "outputs": [
            { "internalType": "uint256", "name": "", "type": "uint256" }
        ], "stateMutability": "view", "type": "function"
    },
    {
        "inputs": [], "name": "getHeight", "outputs": [
            { "internalType": "uint256", "name": "", "type": "uint256" }
        ], "stateMutability": "view", "type": "function"
    },
    {
        "inputs": [], "name": "getWidth", "outputs": [
            { "internalType": "uint256", "name": "", "type": "uint256" }
        ], "stateMutability": "view", "type": "function"
    },
    {
        "inputs": [
            { "internalType": "uint256", "name": "h", "type": "uint256" }
        ], "name": "setHeight", "outputs": [], "stateMutability": "nonpayable", "type": "function"
    },
    {
        "inputs": [
            { "internalType": "uint256", "name": "w", "type": "uint256" }
        ], "name": "setWidth", "outputs": [], "stateMutability": "nonpayable", "type": "function"
    }
  ];

  let provider;
  let signer;
  let contract;

  // ---------------------------
  // 1. CÃœZDAN BAÄLANTISI (Connect Wallet) ğŸ”¥ EKLENDÄ°
  // ---------------------------
  document.getElementById("connectButton").onclick = async () => {
    if (typeof window.ethereum !== "undefined") {
      try {
        await ethereum.request({ method: "eth_requestAccounts" });
        
        provider = new ethers.BrowserProvider(window.ethereum);
        signer = await provider.getSigner();
        contract = new ethers.Contract(CONTRACT_ADDRESS, ABI, signer);
        
        alert("CÃ¼zdan baÅŸarÄ±yla baÄŸlandÄ±!");
      } catch (e) {
         alert("CÃ¼zdan baÄŸlantÄ±sÄ± baÅŸarÄ±sÄ±z oldu: " + e.message);
      }
    } else {
      alert("LÃ¼tfen Ã¶nce MetaMask'i kurun.");
    }
  };

  // ---------------------------
  // 2. GENÄ°ÅLÄ°K AYARLAMA (Set Width) ğŸ”¥ EKLENDÄ°
  // ---------------------------
  document.getElementById("setWidthButton").onclick = async () => {
    if (!contract) return alert("LÃ¼tfen Ã¶nce CÃ¼zdanÄ± BaÄŸla (Connect Wallet) dÃ¼ÄŸmesine tÄ±klayÄ±n.");

    const w = document.getElementById("widthInput").value;
    
    if (!w || w <= 0) {
      alert("LÃ¼tfen geÃ§erli bir geniÅŸlik (> 0) girin.");
      return;
    }
    
    try {
      const tx = await contract.setWidth(w); 
      await tx.wait(); 
      alert("GeniÅŸlik baÅŸarÄ±yla ayarlandÄ±!");
    } catch (e) {
      alert("Hata (Set Width): " + e.message); 
    }
  };

  // ---------------------------
  // 3. YÃœKSEKLÄ°K AYARLAMA (Set Height) ğŸ”¥ EKLENDÄ°
  // ---------------------------
  document.getElementById("setHeightButton").onclick = async () => {
    if (!contract) return alert("LÃ¼tfen Ã¶nce CÃ¼zdanÄ± BaÄŸla (Connect Wallet) dÃ¼ÄŸmesine tÄ±klayÄ±n.");

    const h = document.getElementById("heightInput").value;
    
    if (!h || h <= 0) {
      alert("LÃ¼tfen geÃ§erli bir yÃ¼kseklik (> 0) girin.");
      return;
    }
    
    try {
      const tx = await contract.setHeight(h); 
      await tx.wait(); 
      alert("YÃ¼kseklik baÅŸarÄ±yla ayarlandÄ±!");
    } catch (e) {
      alert("Hata (Set Height): " + e.message);
    }
  };

  // ---------------------------
  // 4. ALAN HESAPLAMA (Area) ğŸ”¥ EKLENDÄ°
  // ---------------------------
  document.getElementById("areaButton").onclick = async () => {
    if (!contract) return alert("LÃ¼tfen Ã¶nce CÃ¼zdanÄ± BaÄŸla (Connect Wallet) dÃ¼ÄŸmesine tÄ±klayÄ±n.");

    try {
      const a = await contract.area(); 
      document.getElementById("result").innerText = "Alan = " + a.toString(); 
    } catch (e) {
      alert("Hata (Area): " + e.message); 
    }
  };
</script>

</body>
</html>